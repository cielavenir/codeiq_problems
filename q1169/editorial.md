2014年11月17日～2014年12月1日の期間、Restricted Base32という制限コーディング問題を出題しました。
37名の方が挑戦してくださいました。

制限コーディングは昨年のRestricted Words (Hello World)に続いて2問目でした。
あちらは「数値・文字列・文字リテラル不可」でしたが、今回はバッジ問題となったため、客観的に採点できるよう、使用できる文字を制限することにしました。
そのため、採点プログラムを必要としてしまいました。JavaScriptと違ってブラウザ上で採点が完結しないため、敷居が高いことになってしまいました。この点は何らかの形で次回に活かせればと思います。

## 言語統計
|言語|人数|
|:--|:--|
|Ruby|12|
|Perl|5|
|Python2|4|
|C|3|
|Python3|2|
|Whitespace|2|
|Bash|1|
|Haskell|1|
|Java|1|
|JavaScript(Node.js)|1|
|JavaScript(Spidermonkey)|1|
|Pascal(FPC)|1|
|Scala|1|
|Tcl|1|

Python2は全て後述する穴を利用した解答でした。

## データセット等
<https://github.com/cielavenir/codeiq_problems/tree/master/q1169>
で公開しています。
data.ansはCodeIQの英語の紹介文にしたつもりです。
解答はC/Ruby/Javaを用意しました。

## 想定解
### Base32
1文字ずつ拾い、変換テーブルから添字を取得し、5ビットずつ詰めていき、8ビットに達したら左側から8ビットを(バイナリとして)出力すれば良いです。

### 制限コーディング
ポイントは3点あります。

- 変換テーブルの保持の仕方

一部の言語を除き、文字及び文字列が使えないので、ASCIIコードの配列で保持することになります。
また、これも言語限定ですが、正規表現リテラルやQ記法を使う手もありますし、
「class ABCDEFGHIJKLMNOPQRSTUVWXYZ234567」のクラス名を持ってくることも可能でしょう。

- 不等号

不等号が使えないので、ビットシフトは複数回乗算を行うしかありません。繰り返し二乗法を使ってももちろん良いです。
累乗の演算子がある言語の場合はそれを使っても構いません。
整数の比較については、「x&lt;y」は「x/y==0」、「x&gt;=y」は「x/y!=0」と置き換えることができます。

- and

&amp;が使えないということは、条件分岐の際のandが使えないということです。
この問題の場合は、'a'&lt;=c &amp;&amp; c&lt;='z'に相当する処理が必要です。
予約語andが存在する言語は良いのですが、無い言語の場合、
「真偽値を整数0/1に変換する」ことと「配列aの要素が全て非0&lt;=&gt;配列aの各要素の積が非0」ということを使います。
また、「非負数の配列aの要素が全て0&lt;=&gt;aの各要素の和が0」もアルゴリズム問題を解く際に有用な場合があるので覚えておくと良いかもしれません。
(念のため申し上げますと「負数が含まれる(可能性のある)配列aの要素が全て0&lt;=&gt;aの各要素の2乗の和が0」です。)
なお、Rubyだと真偽値を整数0/1に変換することが困難であるため、解答例ではTrueClassとFalseClassをモンキーパッチしています。
JavaはBoolean.compareを使っています。

この方法を使わず、普通にtoupper()相当の処理を行ってももちろん正解です。

### パディング処理
一部の解答は、パディング処理に誤りがあったため、末尾に余計なヌル文字が出力されていました。
ユーザースクリプト(base32.user.js、tbpgr氏のデスマコロシアム採点スクリプトを参考にさせて頂きました)でチェックしたところ、OKと表示されましたので、このヌル文字については許容することにいたしました。

### 穴
Base64->Base32への変更は、標準ライブラリを用いた解答ができないようにするための対策でした。しかし、PythonのBase64ライブラリにはb32decode()があることを出題後に知りました。
4名がこの解答でした。
禁則文字の都合でBase85/91を選ぶことはできなかったので、やむなしといったところでしょうか。
(編注：Python3.4以降であればBase85もライブラリで突破できます。Pythonすごい。)

また、今回、(github内にあるjavaenc.rbなどの手法で)Javaプログラムを\u記法に変換することで、普通のJavaプログラムで突破することが可能でした。
バックスラッシュも禁則文字に含める必要があったということですね。文字列の中にしか出てこないだろうとたかをくくっていました。
チョコレートバー様、ご指摘ありがとうございました。
他に気づいた方がいなかったのが幸いでした。

## 解答紹介

(割愛させていただきます)

## 問題文
### 背景
バイナリをASCIIに変換してテキストデータとしてやりとりできるようにする方法の１つに [Base32](http://ja.wikipedia.org/wiki/%E4%B8%89%E5%8D%81%E4%BA%8C%E9%80%B2%E6%B3%95#Base32) があります。
Base32は、変換に「ABCDEFGHIJKLMNOPQRSTUVWXYZ234567」を用います。大文字小文字を区別しないのが特徴です。
身近な例では、Googleの2段階認証で用いられています。

### 前説
掲示板を使ってバイナリを送りたいと思ったあなたは、Base32に変換したデータと復号化プログラムを貼り付けることにしました。
ところがこの掲示板、いろいろ問題があり、<font color ="red">「\*<>&"'」を、正しく処理することができません！！</font>
**そこで、これら5文字を使わずにBase32復号化プログラムを書く</b>ことにしました。**

### 問題
Base32データが標準入力から入力されるので、復号化したデータを標準出力に出力してください。
英字の大文字小文字はランダムに入力されます。
また、改行など、変換文字以外は無視する必要があります。

### 入出力例
入力

~~~
JeQgy33wmuqe
G33emvEVCIi=
~~~

出力

~~~
I love CodeIQ!
~~~

### 採点方法
採点は、資料 base32.zip (注：上記データセット参照) に同梱されている check.rb を用いて行います。
・まず、禁則文字のチェックを行います。
・次いで、プログラムと採点用データ(入出力例とは異なります)を [ideone](http://ideone.com/) にアップロードして行います。

### 提出方法
プログラムは実行できる形で提出してください。
つまり、 [ideone](http://ideone.com/) で一意に特定できるような言語名をコメントとしてご記入いただくことになります。
また、zipに圧縮はせず、 *拡張子「.txt」でアップロード* してください。

